(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{10:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var s=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),n=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[a].concat(n).concat([s]).join("\n")}var i;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a}).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},s=0;s<this.length;s++){var n=this[s][0];null!=n&&(r[n]=!0)}for(s=0;s<e.length;s++){var i=e[s];null!=i[0]&&r[i[0]]||(a&&!i[2]?i[2]=a:a&&(i[2]="("+i[2]+") and ("+a+")"),t.push(i))}},t}},11:function(e,t,a){"use strict";function r(e,t){for(var a=[],r={},s=0;s<t.length;s++){var n=t[s],i=n[0],l={id:e+":"+s,css:n[1],media:n[2],sourceMap:n[3]};r[i]?r[i].parts.push(l):a.push(r[i]={id:i,parts:[l]})}return a}a.r(t),a.d(t,"default",function(){return m});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n={},i=s&&(document.head||document.getElementsByTagName("head")[0]),l=null,o=0,c=!1,d=function(){},u=null,p="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,a,s){c=a,u=s||{};var i=r(e,t);return f(i),function(t){for(var a=[],s=0;s<i.length;s++){var l=i[s];(o=n[l.id]).refs--,a.push(o)}t?f(i=r(e,t)):i=[];for(s=0;s<a.length;s++){var o;if(0===(o=a[s]).refs){for(var c=0;c<o.parts.length;c++)o.parts[c]();delete n[o.id]}}}}function f(e){for(var t=0;t<e.length;t++){var a=e[t],r=n[a.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](a.parts[s]);for(;s<a.parts.length;s++)r.parts.push(y(a.parts[s]));r.parts.length>a.parts.length&&(r.parts.length=a.parts.length)}else{var i=[];for(s=0;s<a.parts.length;s++)i.push(y(a.parts[s]));n[a.id]={id:a.id,refs:1,parts:i}}}}function h(){var e=document.createElement("style");return e.type="text/css",i.appendChild(e),e}function y(e){var t,a,r=document.querySelector("style["+p+'~="'+e.id+'"]');if(r){if(c)return d;r.parentNode.removeChild(r)}if(v){var s=o++;r=l||(l=h()),t=b.bind(null,r,s,!1),a=b.bind(null,r,s,!0)}else r=h(),t=function(e,t){var a=t.css,r=t.media,s=t.sourceMap;r&&e.setAttribute("media",r);u.ssrId&&e.setAttribute(p,t.id);s&&(a+="\n/*# sourceURL="+s.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");if(e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}.bind(null,r),a=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else a()}}var g,_=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function b(e,t,a,r){var s=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,s);else{var n=document.createTextNode(s),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n)}}},125:function(e,t,a){var r=a(220);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a(11).default)("4649c66a",r,!0,{})},162:function(e,t,a){"use strict";function r(e,t,a,r,s,n,i){try{var l=e[n](i),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(r,s)}var s={name:"AddPlayerDialog",data:()=>({name:"",rule:blessing.extra.rule,length:blessing.extra.length}),methods:{addPlayer(){var e,t=this;return(e=function*(){const{code:e,message:a}=yield t.$http.post("/user/player/add",{name:t.name});0===e?($("#modal-add-player").modal("hide"),t.$message.success(a),t.$emit("add")):t.$message.warning(a)},function(){var t=this,a=arguments;return new Promise(function(s,n){var i=e.apply(t,a);function l(e){r(i,s,n,l,o,"next",e)}function o(e){r(i,s,n,l,o,"throw",e)}l(void 0)})})()}}},n=a(66),i=Object(n.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal fade",attrs:{id:"modal-add-player",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),a("h4",{directives:[{name:"t",rawName:"v-t",value:"user.player.add-player",expression:"'user.player.add-player'"}],staticClass:"modal-title"})]),e._v(" "),a("div",{staticClass:"modal-body"},[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("td",{directives:[{name:"t",rawName:"v-t",value:"general.player.player-name",expression:"'general.player.player-name'"}],staticClass:"key"}),e._v(" "),a("td",{staticClass:"value"},[a("el-input",{attrs:{type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)])])]),e._v(" "),a("div",{staticClass:"callout callout-info"},[a("ul",{staticStyle:{padding:"0 0 0 20px",margin:"0"}},[a("li",[e._v(e._s(e.rule))]),e._v(" "),a("li",[e._v(e._s(e.length))])])])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("el-button",{attrs:{"data-dismiss":"modal"}},[e._v(e._s(e.$t("general.close")))]),e._v(" "),a("el-button",{attrs:{type:"primary","data-test":"addPlayer"},on:{click:e.addPlayer}},[e._v("\n          "+e._s(e.$t("general.submit"))+"\n        ")])],1)])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null);t.a=i.exports},219:function(e,t,a){"use strict";var r=a(125);a.n(r).a},220:function(e,t,a){(e.exports=a(10)(!1)).push([e.i,".player{cursor:pointer;border-bottom:1px solid #f4f4f4}.player .pid,.player .player-name{padding-top:13px}.player:last-child{border-bottom:none}.player-selected{background-color:#f5f5f5}.skin2d{float:right;max-height:64px;width:64px;font-size:16px}#preview-2d>p{height:64px;line-height:64px}.form-group{cursor:pointer}",""])},393:function(e,t,a){"use strict";a.r(t);var r=a(162),s=a(67);function n(e,t,a,r,s,n,i){try{var l=e[n](i),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(r,s)}function i(e){return function(){var t=this,a=arguments;return new Promise(function(r,s){var i=e.apply(t,a);function l(e){n(i,r,s,l,o,"next",e)}function o(e){n(i,r,s,l,o,"throw",e)}l(void 0)})}}var l={name:"Players",components:{AddPlayerDialog:r.a,Previewer:()=>Promise.all([a.e(1),a.e(2)]).then(a.bind(null,379))},mixins:[s.a],props:{baseUrl:{type:String,default:blessing.base_url}},data:()=>({players:[],selected:0,using3dPreviewer:!0,skinUrl:"",capeUrl:"",model:"steve",preview2d:{skin:0,cape:0},clear:{skin:!1,cape:!1}}),beforeMount(){var e=this;return i(function*(){yield e.fetchPlayers(),1===e.players.length&&e.preview(e.players[0])})()},methods:{fetchPlayers(){var e=this;return i(function*(){e.players=(yield e.$http.get("/user/player/list")).data})()},togglePreviewer(){this.using3dPreviewer=!this.using3dPreviewer},preview(e){var t=this;return i(function*(){if(t.selected=e.pid,t.preview2d.skin=e.tid_skin,t.preview2d.cape=e.tid_cape,e.tid_skin){const{data:a}=yield t.$http.get("/skinlib/info/".concat(e.tid_skin));t.skinUrl="".concat(t.baseUrl,"/textures/").concat(a.hash),t.model=a.type}else t.skinUrl="",t.model="steve";if(e.tid_cape){const{data:a}=yield t.$http.get("/skinlib/info/".concat(e.tid_cape));t.capeUrl="".concat(t.baseUrl,"/textures/").concat(a.hash)}else t.capeUrl=""})()},changeName(e){var t=this;return i(function*(){let a;try{({value:a}=yield t.$prompt(t.$t("user.changePlayerName"),{inputValue:e.name,inputValidator:e=>!!e||t.$t("user.emptyPlayerName")}))}catch(e){return}const{code:r,message:s}=yield t.$http.post("/user/player/rename/".concat(e.pid),{name:a});0===r?(t.$message.success(s),e.name=a):t.$message.warning(s)})()},clearTexture(){var e=this;return i(function*(){if(Object.values(e.clear).every(e=>!e))return e.$message.warning(e.$t("user.noClearChoice"));const{code:t,message:a}=yield e.$http.post("/user/player/texture/clear/".concat(e.selected),e.clear);if(0===t){$(".modal").modal("hide"),e.$message.success(a);const t=e.players.find(t=>{let{pid:a}=t;return a===e.selected});Object.keys(e.clear).filter(t=>e.clear[t]).forEach(e=>t["tid_".concat(e)]=0)}else e.$message.warning(a)})()},deletePlayer(e,t){var a=this;return i(function*(){try{yield a.$confirm(a.$t("user.deletePlayerNotice"),{title:a.$t("user.deletePlayer"),type:"warning"})}catch(e){return}const{code:r,message:s}=yield a.$http.post("/user/player/delete/".concat(e.pid));0===r?(a.$delete(a.players,t),a.$message.success(s)):a.$message.warning(s)})()}}},o=(a(219),a(66)),c=Object(o.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"box box-primary"},[a("div",{staticClass:"box-body table-responsive no-padding"},[a("table",{staticClass:"table table-hover"},[a("thead",[a("tr",[a("th",[e._v("PID")]),e._v(" "),a("th",{directives:[{name:"t",rawName:"v-t",value:"general.player.player-name",expression:"'general.player.player-name'"}]}),e._v(" "),a("th",{directives:[{name:"t",rawName:"v-t",value:"user.player.operation",expression:"'user.player.operation'"}]})])]),e._v(" "),a("tbody",e._l(e.players,function(t,r){return a("tr",{key:t.pid,staticClass:"player",class:{"player-selected":t.pid===e.selected},on:{click:function(a){return e.preview(t)}}},[a("td",{staticClass:"pid"},[e._v(e._s(t.pid))]),e._v(" "),a("td",{staticClass:"player-name"},[e._v(e._s(t.name))]),e._v(" "),a("td",[a("el-button",{attrs:{size:"medium"},on:{click:function(a){return e.changeName(t)}}},[e._v("\n                    "+e._s(e.$t("user.player.edit-pname"))+"\n                  ")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"warning","data-toggle":"modal","data-target":"#modal-clear-texture"}},[e._v("\n                    "+e._s(e.$t("user.player.delete-texture"))+"\n                  ")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"danger"},on:{click:function(a){return e.deletePlayer(t,r)}}},[e._v("\n                    "+e._s(e.$t("user.player.delete-player"))+"\n                  ")])],1)])}),0)])]),e._v(" "),a("div",{staticClass:"box-footer clearfix"},[a("el-button",{attrs:{type:"primary","data-toggle":"modal","data-target":"#modal-add-player"}},[a("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}}),e._v("  "+e._s(e.$t("user.player.add-player"))+"\n          ")])],1)]),e._v(" "),e._m(0)]),e._v(" "),a("div",{staticClass:"col-md-6"},[e.using3dPreviewer?a("previewer",{attrs:{skin:e.skinUrl,cape:e.capeUrl,model:e.model,title:"user.player.player-info"},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{attrs:{"data-test":"to2d"},on:{click:e.togglePreviewer}},[e._v("\n            "+e._s(e.$t("user.switch2dPreview"))+"\n          ")])]},proxy:!0}],null,!1,3809421328)}):a("div",{staticClass:"box"},[a("div",{staticClass:"box-header with-border"},[a("h3",{staticClass:"box-title",domProps:{innerHTML:e._s(e.$t("user.player.player-info"))}})]),e._v(" "),a("div",{staticClass:"box-body"},[a("div",{attrs:{id:"preview-2d"}},[a("p",[e._v("\n              "+e._s(e.$t("general.skin"))+"\n              "),e.preview2d.skin?a("a",{attrs:{href:e.baseUrl+"/skinlib/show/"+e.preview2d.skin}},[a("img",{staticClass:"skin2d",attrs:{src:e.baseUrl+"/preview/64/"+e.preview2d.skin+".png"}})]):a("span",{directives:[{name:"t",rawName:"v-t",value:"user.player.texture-empty",expression:"'user.player.texture-empty'"}],staticClass:"skin2d"})]),e._v(" "),a("p",[e._v("\n              "+e._s(e.$t("general.cape"))+"\n              "),e.preview2d.cape?a("a",{attrs:{href:e.baseUrl+"/skinlib/show/"+e.preview2d.cape}},[a("img",{staticClass:"skin2d",attrs:{src:e.baseUrl+"/preview/64/"+e.preview2d.cape+".png"}})]):a("span",{directives:[{name:"t",rawName:"v-t",value:"user.player.texture-empty",expression:"'user.player.texture-empty'"}],staticClass:"skin2d"})])])]),e._v(" "),a("div",{staticClass:"box-footer"},[a("el-button",{on:{click:e.togglePreviewer}},[e._v("\n            "+e._s(e.$t("user.switch3dPreview"))+"\n          ")])],1)])],1)]),e._v(" "),a("add-player-dialog",{on:{add:e.fetchPlayers}}),e._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal-clear-texture",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._m(1),e._v(" "),a("h4",{directives:[{name:"t",rawName:"v-t",value:"user.chooseClearTexture",expression:"'user.chooseClearTexture'"}],staticClass:"modal-title"})]),e._v(" "),a("div",{staticClass:"modal-body"},[a("label",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.clear.skin,expression:"clear.skin"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.clear.skin)?e._i(e.clear.skin,null)>-1:e.clear.skin},on:{change:function(t){var a=e.clear.skin,r=t.target,s=!!r.checked;if(Array.isArray(a)){var n=e._i(a,null);r.checked?n<0&&e.$set(e.clear,"skin",a.concat([null])):n>-1&&e.$set(e.clear,"skin",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.clear,"skin",s)}}}),e._v(" "+e._s(e.$t("general.skin"))+"\n          ")]),e._v(" "),a("br"),e._v(" "),a("label",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.clear.cape,expression:"clear.cape"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.clear.cape)?e._i(e.clear.cape,null)>-1:e.clear.cape},on:{change:function(t){var a=e.clear.cape,r=t.target,s=!!r.checked;if(Array.isArray(a)){var n=e._i(a,null);r.checked?n<0&&e.$set(e.clear,"cape",a.concat([null])):n>-1&&e.$set(e.clear,"cape",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.clear,"cape",s)}}}),e._v(" "+e._s(e.$t("general.cape"))+"\n          ")])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("el-button",{attrs:{"data-dismiss":"modal"}},[e._v(e._s(e.$t("general.close")))]),e._v(" "),a("el-button",{attrs:{type:"primary","data-test":"clearTexture"},on:{click:e.clearTexture}},[e._v("\n            "+e._s(e.$t("general.submit"))+"\n          ")])],1)])])])],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"box box-default"},[t("div",{staticClass:"box-header with-border"},[t("h3",{directives:[{name:"t",rawName:"v-t",value:"general.tip",expression:"'general.tip'"}],staticClass:"box-title"})]),this._v(" "),t("div",{staticClass:"box-body"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"user.player.login-notice",expression:"'user.player.login-notice'"}]})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null);t.default=c.exports},66:function(e,t,a){"use strict";function r(e,t,a,r,s,n,i,l){var o,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),r&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),i?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=o):s&&(o=l?function(){s.call(this,this.$root.$options.shadowRoot)}:s),o)if(c.functional){c._injectStyles=o;var d=c.render;c.render=function(e,t){return o.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:c}}a.d(t,"a",function(){return r})},67:function(e,t,a){"use strict";var r=a(0),s=a(2);t.a=r.default.extend({mounted(){s.a("mounted",{el:this.$root.$options.el})}})}}]);
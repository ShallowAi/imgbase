(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{10:function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var s=function(e,t){var s=e[1]||"",a=e[3];if(!a)return s;if(t&&"function"==typeof btoa){var n=(r=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),i=a.sources.map(function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"});return[s].concat(i).concat([n]).join("\n")}var r;return[s].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+s+"}":s}).join("")},t.i=function(e,s){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},n=0;n<this.length;n++){var i=this[n][0];null!=i&&(a[i]=!0)}for(n=0;n<e.length;n++){var r=e[n];null!=r[0]&&a[r[0]]||(s&&!r[2]?r[2]=s:s&&(r[2]="("+r[2]+") and ("+s+")"),t.push(r))}},t}},11:function(e,t,s){"use strict";function a(e,t){for(var s=[],a={},n=0;n<t.length;n++){var i=t[n],r=i[0],o={id:e+":"+n,css:i[1],media:i[2],sourceMap:i[3]};a[r]?a[r].parts.push(o):s.push(a[r]={id:r,parts:[o]})}return s}s.r(t),s.d(t,"default",function(){return m});var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},r=n&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,c=!1,d=function(){},u=null,p="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,s,n){c=s,u=n||{};var r=a(e,t);return h(r),function(t){for(var s=[],n=0;n<r.length;n++){var o=r[n];(l=i[o.id]).refs--,s.push(l)}t?h(r=a(e,t)):r=[];for(n=0;n<s.length;n++){var l;if(0===(l=s[n]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete i[l.id]}}}}function h(e){for(var t=0;t<e.length;t++){var s=e[t],a=i[s.id];if(a){a.refs++;for(var n=0;n<a.parts.length;n++)a.parts[n](s.parts[n]);for(;n<s.parts.length;n++)a.parts.push(b(s.parts[n]));a.parts.length>s.parts.length&&(a.parts.length=s.parts.length)}else{var r=[];for(n=0;n<s.parts.length;n++)r.push(b(s.parts[n]));i[s.id]={id:s.id,refs:1,parts:r}}}}function f(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function b(e){var t,s,a=document.querySelector("style["+p+'~="'+e.id+'"]');if(a){if(c)return d;a.parentNode.removeChild(a)}if(v){var n=l++;a=o||(o=f()),t=_.bind(null,a,n,!1),s=_.bind(null,a,n,!0)}else a=f(),t=function(e,t){var s=t.css,a=t.media,n=t.sourceMap;a&&e.setAttribute("media",a);u.ssrId&&e.setAttribute(p,t.id);n&&(s+="\n/*# sourceURL="+n.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");if(e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}.bind(null,a),s=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else s()}}var g,y=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function _(e,t,s,a){var n=s?"":a.css;if(e.styleSheet)e.styleSheet.cssText=y(t,n);else{var i=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}},121:function(e,t,s){"use strict";var a=s(0);function n(e,t,s,a,n,i,r){try{var o=e[i](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(a,n)}t.a=a.default.extend({methods:{setAsAvatar(){var e,t=this;return(e=function*(){try{yield t.$confirm(t.$t("user.setAvatarNotice"),t.$t("user.setAvatar"))}catch(e){return}const{code:e,message:s}=yield t.$http.post("/user/profile/avatar",{tid:t.tid});0===e?(t.$message.success(s),Array.from(document.querySelectorAll('[alt="User Image"]')).forEach(e=>e.src+="?".concat((new Date).getTime()))):t.$message.warning(s)},function(){var t=this,s=arguments;return new Promise(function(a,i){var r=e.apply(t,s);function o(e){n(r,a,i,o,l,"next",e)}function l(e){n(r,a,i,o,l,"throw",e)}o(void 0)})})()}}})},122:function(e,t,s){"use strict";var a=s(86);s.n(a).a},123:function(e,t,s){(e.exports=s(10)(!1)).push([e.i,".player-item:not(:first-child){margin-top:10px}",""])},152:function(e,t,s){"use strict";var a=s(0);function n(e,t,s,a,n,i,r){try{var o=e[i](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(a,n)}t.a=a.default.extend({methods:{addClosetItem(){var e,t=this;return(e=function*(){let e;try{({value:e}=yield t.$prompt(t.$t("skinlib.applyNotice"),{title:t.$t("skinlib.setItemName"),inputValue:t.name,showCancelButton:!0,inputValidator:e=>!!e||t.$t("skinlib.emptyItemName")}))}catch(e){return}const{code:s,message:a}=yield t.$http.post("/user/closet/add",{tid:t.tid,name:e});0===s?(t.$message.success(a),t.$emit("like-toggled",!0)):t.$message.warning(a)},function(){var t=this,s=arguments;return new Promise(function(a,i){var r=e.apply(t,s);function o(e){n(r,a,i,o,l,"next",e)}function l(e){n(r,a,i,o,l,"throw",e)}o(void 0)})})()}}})},155:function(e,t,s){var a=s(373);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,s(11).default)("391ba18d",a,!0,{})},161:function(e,t,s){"use strict";function a(e,t,s,a,n,i,r){try{var o=e[i](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(a,n)}function n(e){return function(){var t=this,s=arguments;return new Promise(function(n,i){var r=e.apply(t,s);function o(e){a(r,n,i,o,l,"next",e)}function l(e){a(r,n,i,o,l,"throw",e)}o(void 0)})}}var i={name:"ApplyToPlayerDialog",props:{skin:Number,cape:Number,allowAdd:{type:Boolean,default:!0}},data:()=>({players:[],selected:0}),methods:{fetchList(){var e=this;return n(function*(){e.players=(yield e.$http.get("/user/player/list")).data})()},submit(){var e=this;return n(function*(){if(!e.selected)return e.$message.info(e.$t("user.emptySelectedPlayer"));if(!e.skin&&!e.cape)return e.$message.info(e.$t("user.emptySelectedTexture"));const{code:t,message:s}=yield e.$http.post("/user/player/set/".concat(e.selected),{skin:e.skin||void 0,cape:e.cape||void 0});0===t?(e.$message.success(s),$("#modal-use-as").modal("hide")):e.$message.warning(s)})()},avatarUrl:e=>"".concat(blessing.base_url,"/avatar/35/").concat(e.tid_skin)}},r=(s(122),s(66)),o=Object(r.a)(i,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal fade",attrs:{id:"modal-use-as",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),s("h4",{directives:[{name:"t",rawName:"v-t",value:"user.closet.use-as.title",expression:"'user.closet.use-as.title'"}],staticClass:"modal-title"})]),e._v(" "),s("div",{staticClass:"modal-body"},[0!==e.players.length?e._l(e.players,function(t){return s("div",{key:t.pid,staticClass:"player-item"},[s("label",{staticClass:"model-label",attrs:{for:t.pid}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],attrs:{type:"radio",name:"player"},domProps:{value:t.pid,checked:e._q(e.selected,t.pid)},on:{change:function(s){e.selected=t.pid}}}),e._v(" "),s("img",{attrs:{src:e.avatarUrl(t),width:"35",height:"35"}}),e._v(" "),s("span",[e._v(e._s(t.name))])])])}):s("p",{directives:[{name:"t",rawName:"v-t",value:"user.closet.use-as.empty",expression:"'user.closet.use-as.empty'"}]})],2),e._v(" "),s("div",{staticClass:"modal-footer"},[e.allowAdd?s("a",{directives:[{name:"t",rawName:"v-t",value:"user.closet.use-as.add",expression:"'user.closet.use-as.add'"}],staticClass:"el-button pull-left",attrs:{"data-toggle":"modal","data-target":"#modal-add-player"}}):e._e(),e._v(" "),s("el-button",{attrs:{type:"primary","data-test":"submit"},on:{click:e.submit}},[e._v("\n          "+e._s(e.$t("general.submit"))+"\n        ")])],1)])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("Ã—")])])}],!1,null,null,null);t.a=o.exports},372:function(e,t,s){"use strict";var a=s(155);s.n(a).a},373:function(e,t,s){(e.exports=s(10)(!1)).push([e.i,".table>tbody>tr>td{border-top:0}",""])},401:function(e,t,s){"use strict";s.r(t);var a=s(121),n=s(152),i=s(97),r=s(67);function o(e,t,s,a,n,i,r){try{var o=e[i](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(a,n)}function l(e){return function(){var t=this,s=arguments;return new Promise(function(a,n){var i=e.apply(t,s);function r(e){o(i,a,n,r,l,"next",e)}function l(e){o(i,a,n,r,l,"throw",e)}r(void 0)})}}var c={name:"Show",components:{ApplyToPlayerDialog:s(161).a,Previewer:()=>Promise.all([s.e(1),s.e(2)]).then(s.bind(null,379))},mixins:[r.a,n.a,i.a,a.a],props:{baseUrl:{type:String,default:blessing.base_url}},data(){return{tid:+this.$route[1],name:"",type:"steve",likes:0,hash:"",uploader:0,size:0,uploadAt:"",public:!0,liked:blessing.extra.inCloset,canBeDownloaded:blessing.extra.download,currentUid:blessing.extra.currentUid,admin:blessing.extra.admin,uploaderNickName:blessing.extra.nickname,reportScore:blessing.extra.report}},computed:{anonymous(){return!this.currentUid},hasEditPermission(){return this.uploader===this.currentUid||this.admin},togglePrivacyText(){return this.public?"skinlib.setAsPrivate":"skinlib.setAsPublic"},textureUrl(){return"".concat(this.baseUrl,"/textures/").concat(this.hash)}},beforeMount(){this.fetchData()},methods:{fetchData(){var e=this;return l(function*(){const{data:t={}}=yield e.$http.get("/skinlib/info/".concat(e.tid));Object.assign(e.$data,t),e.uploadAt=t.upload_at})()},addToCloset(){var e=this;return l(function*(){e.$once("like-toggled",()=>{e.liked=!0,e.likes+=1}),yield e.addClosetItem()})()},removeFromCloset(){var e=this;return l(function*(){e.$once("item-removed",()=>{e.liked=!1,e.likes-=1}),yield e.removeClosetItem()})()},download(){const e=document.createElement("a");e.href="".concat(this.baseUrl,"/raw/").concat(this.tid,".png"),e.download="".concat(this.name,".png");const t=new MouseEvent("click");e.dispatchEvent(t)},changeTextureName(){var e=this;return l(function*(){let t;try{({value:t}=yield e.$prompt(e.$t("skinlib.setNewTextureName"),{inputValue:e.name,inputValidator:t=>!!t||e.$t("skinlib.emptyNewTextureName")}))}catch(e){return}const{code:s,message:a}=yield e.$http.post("/skinlib/rename",{tid:e.tid,new_name:t});0===s?(e.name=t,e.$message.success(a)):e.$message.error(a)})()},changeModel(){var e=this;return l(function*(){const t=e.$createElement,s=t("div",null,[t("span",null,e.$t("skinlib.setNewTextureModel")),t("select",{attrs:{selectedIndex:0}},[t("option",{attrs:{value:"steve"}},"Steve"),t("option",{attrs:{value:"alex"}},"Alex"),t("option",{attrs:{value:"cape"}},e.$t("general.cape"))])]);try{yield e.$msgbox({message:s,showCancelButton:!0})}catch(e){return}const a=["steve","alex","cape"][s.children[1].elm.selectedIndex],{code:n,message:i}=yield e.$http.post("/skinlib/model",{tid:e.tid,model:a});0===n?(e.type=a,e.$message.success(i)):e.$message.warning(i)})()},togglePrivacy(){var e=this;return l(function*(){try{yield e.$confirm(e.public?e.$t("skinlib.setPrivateNotice"):e.$t("skinlib.setPublicNotice"),{type:"warning"})}catch(e){return}const{code:t,message:s}=yield e.$http.post("/skinlib/privacy",{tid:e.tid});0===t?(e.$message.success(s),e.public=!e.public):e.$message.warning(s)})()},deleteTexture(){var e=this;return l(function*(){try{yield e.$confirm(e.$t("skinlib.deleteNotice"),{type:"warning"})}catch(e){return}const{code:t,message:s}=yield e.$http.post("/skinlib/delete",{tid:e.tid});0===t?(e.$message.success(s),setTimeout(()=>window.location="".concat(e.baseUrl,"/skinlib"),1e3)):e.$message.warning(s)})()},report(){var e=this;return l(function*(){const t=(()=>e.reportScore>0?e.$t("skinlib.report.positive",{score:e.reportScore}):e.reportScore<0?e.$t("skinlib.report.negative",{score:-e.reportScore}):"")();let s;try{({value:s}=yield e.$prompt(t,{title:e.$t("skinlib.report.title"),inputPlaceholder:e.$t("skinlib.report.reason")}))}catch(e){return}const{code:a,message:n}=yield e.$http.post("/skinlib/report",{tid:e.tid,reason:s});0===a?e.$message.success(n):e.$message.warning(n)})()},fetchPlayersList(){this.$refs.useAs.fetchList()}}},d=(s(372),s(66)),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[s("previewer",{attrs:{skin:"cape"!==e.type&&e.textureUrl,cape:"cape"===e.type?e.textureUrl:"",model:e.type,"init-position-z":60},scopedSlots:e._u([{key:"footer",fn:function(){return[e.anonymous?s("el-button",{attrs:{disabled:"",title:e.$t("skinlib.show.anonymous")}},[e._v("\n          "+e._s(e.$t("skinlib.addToCloset"))+"\n        ")]):[e.liked?s("el-button",{attrs:{type:"success",size:"medium","data-toggle":"modal","data-target":"#modal-use-as"},on:{click:e.fetchPlayersList}},[e._v("\n            "+e._s(e.$t("skinlib.apply"))+"\n          ")]):e._e(),e._v(" "),e.liked?s("el-button",{attrs:{type:"primary",size:"medium","data-test":"removeFromCloset"},on:{click:e.removeFromCloset}},[e._v("\n            "+e._s(e.$t("skinlib.removeFromCloset"))+"\n          ")]):s("el-button",{attrs:{type:"primary",size:"medium","data-test":"addToCloset"},on:{click:e.addToCloset}},[e._v("\n            "+e._s(e.$t("skinlib.addToCloset"))+"\n          ")]),e._v(" "),"cape"!==e.type?s("el-button",{attrs:{size:"medium","data-test":"setAsAvatar"},on:{click:e.setAsAvatar}},[e._v("\n            "+e._s(e.$t("user.setAsAvatar"))+"\n          ")]):e._e(),e._v(" "),e.canBeDownloaded?s("el-button",{attrs:{size:"medium","data-test":"download"},on:{click:e.download}},[e._v("\n            "+e._s(e.$t("skinlib.show.download"))+"\n          ")]):e._e(),e._v(" "),s("el-button",{attrs:{type:"warning",size:"medium","data-test":"report"},on:{click:e.report}},[e._v("\n            "+e._s(e.$t("skinlib.report.title"))+"\n          ")])],e._v(" "),s("div",{staticClass:"btn likes pull-right",staticStyle:{cursor:"auto"},style:{color:e.liked?"#e0353b":"#333"},attrs:{title:e.$t("skinlib.show.likes")}},[s("i",{staticClass:"fas fa-heart"}),e._v(" "),s("span",[e._v(e._s(e.likes))])])]},proxy:!0}])})],1),e._v(" "),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"box box-primary"},[s("div",{staticClass:"box-header with-border"},[s("h3",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.detail",expression:"'skinlib.show.detail'"}],staticClass:"box-title"})]),e._v(" "),s("div",{staticClass:"box-body"},[s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.name",expression:"'skinlib.show.name'"}]}),e._v(" "),s("td",[e._v("\n                "+e._s(e.name.length>15?e.name.slice(0,15)+"...":e.name)+"\n                "),e.hasEditPermission?s("small",[s("a",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.edit",expression:"'skinlib.show.edit'"}],attrs:{href:"#"},on:{click:e.changeTextureName}})]):e._e()])]),e._v(" "),s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.model",expression:"'skinlib.show.model'"}]}),e._v(" "),s("td",["cape"===e.type?[e._v(e._s(e.$t("general.cape")))]:[e._v(e._s(e.type))],e._v(" "),e.hasEditPermission?s("small",[s("a",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.edit",expression:"'skinlib.show.edit'"}],attrs:{href:"#"},on:{click:e.changeModel}})]):e._e()],2)]),e._v(" "),s("tr",[s("td",[e._v("Hash")]),e._v(" "),s("td",[s("span",{attrs:{title:e.hash}},[e._v(e._s(e.hash.slice(0,15))+"...")])])]),e._v(" "),s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.size",expression:"'skinlib.show.size'"}]}),e._v(" "),s("td",[e._v(e._s(e.size)+" KB")])]),e._v(" "),s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.uploader",expression:"'skinlib.show.uploader'"}]}),e._v(" "),null!==e.uploaderNickName?[s("td",[s("a",{attrs:{href:e.baseUrl+"/skinlib?filter="+("cape"===e.type?"cape":"skin")+"&uploader="+e.uploader}},[e._v(e._s(e.uploaderNickName))])])]:[s("td",[s("span",{directives:[{name:"t",rawName:"v-t",value:"general.unexistent-user",expression:"'general.unexistent-user'"}]})])]],2),e._v(" "),s("tr",[s("td",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.upload-at",expression:"'skinlib.show.upload-at'"}]}),e._v(" "),s("td",[e._v(e._s(e.uploadAt))])])])])])]),e._v(" "),e.hasEditPermission?s("div",{staticClass:"box box-warning"},[s("div",{staticClass:"box-header with-border"},[s("h3",{directives:[{name:"t",rawName:"v-t",value:"admin.operationsTitle",expression:"'admin.operationsTitle'"}],staticClass:"box-title"})]),e._v(" "),s("div",{staticClass:"box-body"},[s("p",{directives:[{name:"t",rawName:"v-t",value:"skinlib.show.manage-notice",expression:"'skinlib.show.manage-notice'"}]})]),e._v(" "),s("div",{staticClass:"box-footer"},[s("el-button",{attrs:{type:"warning"},on:{click:e.togglePrivacy}},[e._v(e._s(e.$t(e.togglePrivacyText)))]),e._v(" "),s("el-button",{staticClass:"pull-right",attrs:{type:"danger"},on:{click:e.deleteTexture}},[e._v("\n          "+e._s(e.$t("skinlib.show.delete-texture"))+"\n        ")])],1)]):e._e()]),e._v(" "),s("apply-to-player-dialog",{ref:"useAs",attrs:{"allow-add":!1,skin:"cape"!==e.type?e.tid:0,cape:"cape"===e.type?e.tid:0}})],1)},[],!1,null,null,null);t.default=u.exports},66:function(e,t,s){"use strict";function a(e,t,s,a,n,i,r,o){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),a&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):n&&(l=o?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}s.d(t,"a",function(){return a})},67:function(e,t,s){"use strict";var a=s(0),n=s(2);t.a=a.default.extend({mounted(){n.a("mounted",{el:this.$root.$options.el})}})},86:function(e,t,s){var a=s(123);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,s(11).default)("e7e7bc04",a,!0,{})},97:function(e,t,s){"use strict";var a=s(0);function n(e,t,s,a,n,i,r){try{var o=e[i](r),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(a,n)}t.a=a.default.extend({methods:{removeClosetItem(){var e,t=this;return(e=function*(){try{yield t.$confirm(t.$t("user.removeFromClosetNotice"),{type:"warning"})}catch(e){return}const{code:e,message:s}=yield t.$http.post("/user/closet/remove/".concat(t.tid));0===e?(t.$emit("item-removed"),t.$message.success(s)):t.$message.warning(s)},function(){var t=this,s=arguments;return new Promise(function(a,i){var r=e.apply(t,s);function o(e){n(r,a,i,o,l,"next",e)}function l(e){n(r,a,i,o,l,"throw",e)}o(void 0)})})()}}})}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{105:function(e,t,r){"use strict";var a=r(0);t.a=a.default.extend({data:()=>({columns:[{field:"id"}],totalRecords:0,serverParams:{sortField:"id",sortType:"asc",page:1,perPage:10,search:""}}),created(){this.serverParams.sortField=this.columns[0].field},methods:{fetchData:()=>Promise.resolve(),onPageChange(e){this.serverParams.page=e.currentPage,this.fetchData()},onPerPageChange(e){this.serverParams.perPage=e.currentPerPage,this.fetchData()},onSortChange(e){let[t]=e;this.serverParams.sortType=t.type,this.serverParams.sortField=t.field,this.fetchData()},onSearch(e){this.serverParams.search=e.searchTerm,this.fetchData()}}})},402:function(e,t,r){"use strict";r.r(t);var a=r(90),s=(r(87),r(76)),o=r(105),n=r(67);function l(e,t,r,a,s,o,n){try{var l=e[o](n),i=l.value}catch(e){return void r(e)}l.done?t(i):Promise.resolve(i).then(a,s)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(a,s){var o=e.apply(t,r);function n(e){l(o,a,s,n,i,"next",e)}function i(e){l(o,a,s,n,i,"throw",e)}n(void 0)})}}var d={name:"ReportsManagement",components:{VueGoodTable:a.a},mixins:[n.a,s.a,o.a],props:{baseUrl:{type:String,default:blessing.base_url}},data(){return{reports:[],columns:[{field:"id",type:"number",hidden:!0},{field:"tid",label:this.$t("report.tid"),type:"number"},{field:"uploader",label:this.$t("skinlib.show.uploader")},{field:"reporter",label:this.$t("report.reporter")},{field:"reason",label:this.$t("report.reason"),sortable:!1,width:"23%"},{field:"status",label:this.$t("report.status-title")},{field:"report_at",label:this.$t("report.time"),globalSearchDisabled:!0},{field:"ops",label:this.$t("admin.operationsTitle"),globalSearchDisabled:!0}]}},mounted(){this.sortField="report_at",this.sortType="desc",this.fetchData()},methods:{fetchData(){var e=this;return i(function*(){const{data:t,totalRecords:r}=yield e.$http.get("/admin/report-data",e.serverParams);e.totalRecords=r,e.reports=t})()},deleteTexture(e){this.resolve(e,"delete")},ban(e){this.resolve(e,"ban")},reject(e){this.resolve(e,"reject")},resolve(e,t){var r=this;return i(function*(){const{code:a,message:s,data:o}=yield r.$http.post("/admin/reports",{id:e.id,action:t});0===a?(r.$message.success(s),e.status=o.status):r.$message.warning(s)})()}}},c=r(66),u=Object(c.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"content"},[r("vue-good-table",{attrs:{mode:"remote",rows:e.reports,"total-rows":e.totalRecords||e.reports.length,columns:e.columns,"search-options":e.tableOptions.search,"pagination-options":e.tableOptions.pagination,"style-class":"vgt-table striped"},on:{"on-page-change":e.onPageChange,"on-sort-change":e.onSortChange,"on-search":e.onSearch,"on-per-page-change":e.onPerPageChange},scopedSlots:e._u([{key:"table-row",fn:function(t){return["tid"===t.column.field?r("span",[e._v("\n        "+e._s(t.formattedRow[t.column.field])+"\n        "),r("a",{attrs:{href:e.baseUrl+"/skinlib/show/"+t.row.tid}},[e._v(e._s(e.$t("report.check")))]),e._v(" "),r("a",{attrs:{href:"#"},on:{click:function(r){return e.deleteTexture(t.row)}}},[e._v("\n          "+e._s(e.$t("report.delete"))+"\n        ")])]):"uploader"===t.column.field?r("span",[e._v("\n        "+e._s(t.row.uploaderName)+" (UID: "+e._s(t.row.uploader)+")\n        "),r("a",{attrs:{href:"#"},on:{click:function(r){return e.ban(t.row)}}},[e._v("\n          "+e._s(e.$t("report.ban"))+"\n        ")])]):"reporter"===t.column.field?r("span",[e._v("\n        "+e._s(t.row.reporterName)+" (UID: "+e._s(t.row.reporter)+")\n      ")]):"status"===t.column.field?r("span",[e._v("\n        "+e._s(e.$t("report.status."+t.row.status))+"\n      ")]):"ops"===t.column.field?r("span",[r("el-button",{attrs:{size:"medium"},on:{click:function(r){return e.reject(t.row)}}},[e._v("\n          "+e._s(e.$t("report.reject"))+"\n        ")])],1):r("span",[e._v("\n        "+e._s(t.formattedRow[t.column.field])+"\n      ")])]}}])})],1)},[],!1,null,null,null);t.default=u.exports},67:function(e,t,r){"use strict";var a=r(0),s=r(2);t.a=a.default.extend({mounted(){s.a("mounted",{el:this.$root.$options.el})}})},76:function(e,t,r){"use strict";var a=r(0);t.a=a.default.extend({data(){return{tableOptions:{search:{enabled:!0,placeholder:this.$t("vendor.datatable.search")},pagination:{enabled:!0,nextLabel:this.$t("vendor.datatable.next"),prevLabel:this.$t("vendor.datatable.prev"),rowsPerPageLabel:this.$t("vendor.datatable.rowsPerPage"),allLabel:this.$t("vendor.datatable.all"),ofLabel:this.$t("vendor.datatable.of")}}}}})}}]);